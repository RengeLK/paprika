{% extends "base.xhtml" %}

{% block content %}
    <p class="title">Domaci ukoly</p><hr class="solid"/>
    <div>
        {% for i in hw %}
        <b>{{ i.teacher }} - {{ i.class }}/{{ i.group }}</b>
        <p>{{ i.msg }}</p>
        <p>Od {{ i.start }} do {{ i.end }}</p>
        <p>Hotovo? {{ i.finished }}</p>
        {% if not finished %}<button onclick="finishHomework('{{ i.id }}')">Splnit</button>{% endif %}
        <hr class="dotted"/>
        {% endfor %}<hr class="solid"/>
    </div>
    <p>Data fetched from Bakalari at {{ time }}</p>

    <script>
        function finishHomework(hwId) {
            fetch(`/xinfo/baka/homework/finish/${encodeURIComponent(hwId)}`, {
                method: "PUT"
            }).then(response => {
                if (response.ok) {
                    location.reload();
                } else {
                    alert("An error occured!");
                }
            });
        }
    </script>
{% endblock %}